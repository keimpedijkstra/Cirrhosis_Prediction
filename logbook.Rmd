---
title: "EDA"
author: "keimpe dijkstra"
date: "14-9-2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r, echo=FALSE}
library(ggplot2) 
library(tidyverse)
```


# Cirrhosis prediction


## Introduction Cirrhosis

Cirrhosis is a serious dissease involving scarring, also called fibrosis, of the liver. 
The scarring develops due to sustained liver damage either by diseases like hepatitis B or C or by alcohol abuse.
Cirrhosis consists of four stages, the third of which is also referred to as cirrhosis.

### Stage 1
The first stage is often undiagnosed and is characterized by inflammation of the liver or bile duct, but this stage is critical because stage 1 is curable and so progression to stage 2 can be prevented.

### Stage 2
In the second stage the scarring and inflammation is starting to obstruct the the bloodflow within the liver.
The liver is not able to function properly but with treatment the liver may be able to recover slightly and further damage can be prevented.

### Stage 3
Cirrhosis occurs in the third stage, the liver is permanently scarred and thus scar tissue starts to replace healthy tissue causing it to become hard and lumpy. 
Blood is prevented to enter the liver and may leak into the spleen.

### Stage 4
In the fourth stage the liver starts to (acutely) fail and medical intervention is needed to prevent fatality.


## The dataset
The dataset consists of 424 Primary biliary cholangitis patients who where on a trial for D-penicillamine which was placebo controlled. 
312 of the instances contain complete data as these patients have participated the trial, the remaining individuals did not participate in the trial but consented to have basic measurements taken.

### Loading the data
Reading the data used for the project.
```{r}
data <- read.csv("./data/cirrhosis.csv")
```

### Codebook
```{r}
codebook <- read.csv("./data/codebook.csv", header = T, sep = ";", row.names = 1)
codebook
```

## Research question

"Can the stage of cirrhosis be determined with basic measurements and non-invasive testing of the blood and urine using machine learning?". 

### Setup of the project
For this project we constructed a machine-learning (ML) algorithm that tries to determine the stage, and thus the severity of cirrhosis in PBC patients. This will involve supervised learning where the class variable is the stage of the disease


## Data preprocessing

### Missing class variables
Since the project uses supervised learning techniques, the rows without a class variable, eg: NA's, serve no purpose for training the algorithm and can thus be removed.

```{r}
sum(is.na(data$Stage)) #checking the amount of na's in the stage collumn
data <- data[!is.na(data$Stage),] #drop the rows with no class variable
```

We identified six rows with no class variable, exactly as the description of the dataset noted. 
We removed the six instances


## Basic statistics

### Summary

First off we will create a summary for all numeric atributes to have a look at their distribution.
```{r}
summary(data[,c(2,5,11,12:19)])
```

We notice a lot of missing values due to a large number of patients not being involved in the whole screening but just provided basic measurements.
The extend to which these missing values will influence the accuracy of the model to be produced is large when about twenty percent of the patients miss a value.
For that reason the choice has been made to for the time being not remove any instances based on missing values.


### Normilization

```{r}
data[,c(11,12:19)] <- lapply(data[,c(11,12:19)], scale)
```

```{r}
boxplot(data[,c(11,12:19)], las = 2)

```















